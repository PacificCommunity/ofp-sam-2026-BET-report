// SPC Theme for Bigeye Tuna Assessment Presentation
// Based on NOAA Slidecraft 101: Colors and Fonts

/*-- scss:defaults --*/
// NOAA colors from 2023 Fisheries Palette
// Check contrast: https://colourcontrast.cc/
// define colors
$theme-background: #fafcfc;//#e9f3f6;
$theme-whale-gray: #323C46;
$theme-midnight-sky: #001743;
$theme-twilight-sky: #002364;
$theme-noaa-sky: #003087;
$theme-noaa-sea: #0085CA;
$theme-pale-sea: #C6E6F0;
$theme-dove-gray: #A5AAAF;
$theme-posit-orange: #ED5E2B;
$theme-moby-blue: #1D63ED;
$theme-black: #000000;

// Get fonts: https://fonts.google.com/
@import url('https://fonts.googleapis.com/css2?family=Roboto+Serif:opsz@8..144&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300;1,300&display=swap');

// define theme colors
$body-bg: $theme-background;
$body-color: $theme-whale-gray;
$link-color: $theme-noaa-sea;
$presentation-heading-color: $theme-midnight-sky;

// define theme fonts
$font-family-sans-serif: 'Montserrat', sans-serif;
$presentation-heading-font: 'Roboto Serif', serif;
$presentation-heading-font-weight: 400;
$presentation-h1-font-size: 2em;

/*-- scss:rules --*/

// Define slide dimensions for backgrounds
$slide-width: 100vw;
$slide-height: 100vh;

// Background mixin framework
@mixin full-screen-background {
  position: fixed;  // Change from absolute to fixed
  top: 0;
  left: 0;
  height: 100vh !important;
  width: 100vw !important;
  z-index: -1;
  pointer-events: none; // Let clicks pass through to content
}

// Title slide wide sidebar mixin
@mixin wide-sidebar {
  @include full-screen-background;
  width: 35vw !important;
  background-image: url('../static/spc-title-sidebar.png');
  background-size: cover;
  background-position: left center;
  background-repeat: no-repeat;
}

// Regular slide narrow sidebar mixin
@mixin narrow-sidebar {
  @include full-screen-background;
  width: 5vw !important;
  background-image: url('../static/spc-slide-sidebar.png');
  background-size: cover;
  background-position: left center;
  background-repeat: no-repeat;
}

// Content layout classes - independent of background styling
.content-with-wide-sidebar {
  margin-left: 38% !important;
  width: 58% !important;
  padding-top: 5% !important;
  padding-right: 2% !important;
  max-height: 85vh !important;
  overflow-y: auto !important;
}

.content-with-narrow-sidebar {
  margin-left: 7% !important;
  width: 91% !important;
  padding-top: 2% !important;
  padding-right: 2% !important;
  max-height: 90vh !important;
  overflow-y: auto !important;
}

// Ensure absolute positioned content is responsive
.reveal .slides section .absolute {
  box-sizing: border-box !important;
  overflow-y: auto !important;
  max-height: 100vh !important;
}

// Prevent content from going off screen
.reveal .slides {
  overflow: hidden !important;
}

.reveal .slides section {
  height: 100% !important;
  overflow: hidden !important;
}

// Auto-scale content for better fit
.reveal .slides section > * {
  max-width: 100% !important;
  box-sizing: border-box !important;
}

// Tables should scroll if too wide
.reveal table {
  display: block !important;
  overflow-x: auto !important;
  max-width: 100% !important;
  font-size: 0.85em !important;
}

// Lists should be more compact
.reveal ul, .reveal ol {
  margin-top: 0.5em !important;
  margin-bottom: 0.5em !important;
}

.reveal li {
  margin-bottom: 0.3em !important;
}

// Headings should be more compact
.reveal h3 {
  margin-top: 0.5em !important;
  margin-bottom: 0.5em !important;
  font-size: 1.3em !important;
}

.reveal h4 {
  margin-top: 0.3em !important;
  margin-bottom: 0.3em !important;
  font-size: 1.1em !important;
}

// Columns should handle overflow
.reveal .columns {
  max-height: 85vh !important;
  overflow-y: auto !important;
}

.reveal .column {
  overflow-y: auto !important;
  max-height: 85vh !important;
}

// Original styles from your file
.titlebox {
  padding: 0.2em 0.4em;
  background-color: rgba(255, 255, 255, .20);
  backdrop-filter: blur(20px);
  box-shadow: 0 0 3rem 0 rgba(0, 0, 0, .2);
  border-radius: 30px;
}

// add a shortcut for emphasizing text
.blue-title {
  color: $theme-noaa-sky;
  font-weight: bold;
  font-family: $presentation-heading-font;
}

.blue {
  color: $theme-noaa-sky;
  font-weight: bold;
}

.font-small {
  font-size: smaller;
}

.bg {
  color: $theme-background;
}

.moby-blue {
  color: #1D63ED;
  font-weight: bold;
}

.hide-text {
    color: $theme-dove-gray;
  }

// add underline for hyperlinks
.reveal .slide a {
  text-decoration: underline;
}

// make a hidden hyperlink
.reveal .slide a.hiddenlink {
  text-decoration: none;
  color: $theme-dove-gray;
}

.highlight-last  {
  color: rgba($theme-whale-gray, .5);
  .current-fragment {
    color: $theme-whale-gray;
  }
}

// emphasize fragment; define colors
$colors: (
  "blue": $theme-noaa-sky,
  "mb-blue": $theme-moby-blue,
  "pc-orange": $theme-posit-orange,
  "black": $theme-black
);
// loop over defined colors
@each $name, $color in $colors {
  .reveal .slides section .fragment.hl-#{$name} {
    opacity: unset;
    visibility: unset;

    &.visible {
      color: $color;
      font-weight: bold;
    }
  }
}
// emphasize current fragment; define colors
$colors: (
  "blue": $theme-noaa-sky,
  "mb-blue": $theme-moby-blue,
  "pc-orange": $theme-posit-orange,
  "black": $theme-black
);
// loop over defined colors
@each $name, $color in $colors {
  .reveal .slides section .fragment.hl-cur-#{$name} {
    opacity: unset;
    visibility: unset;

    // do something to emphasize current fragment
    &.current-fragment {
      // background-color: lighten($color, 50%);
      color: $color;
      font-weight: bold;
    }
  }
}

// fade text; define colors
$colors: (
  "blue": $theme-noaa-sky,
  "mb-blue": $theme-moby-blue,
  "pc-orange": $theme-posit-orange,
  "black": $theme-black,
  "body": $body-color
);
// loop over defined colors
@each $name, $color in $colors {
  .reveal .slides section .fragment.fade-#{$name} {
    opacity: unset;
    visibility: unset;

    &.visible {
      color: rgba($color, .5);
    }
  }
}

// Apply background styling - using body background instead of pseudo-elements
body.wide-sidebar-bg {
  background-image: url('../static/spc-title-sidebar.png');
  background-size: 35vw 100vh;
  background-position: left center;
  background-repeat: no-repeat;
  background-attachment: fixed;
}

body.narrow-sidebar-bg {
  background-image: url('../static/spc-slide-sidebar.png');
  background-size: 5vw 100vh;
  background-position: left center;
  background-repeat: no-repeat;
  background-attachment: fixed;
}

// Remove old pseudo-element approach
.wide-sidebar-bg,
.narrow-sidebar-bg {
  &::before {
    display: none !important;
  }
}

.horizontal-line {
  position: absolute;
  top: 80px;
  left: 2%;
  right: 5%;
  height: 2px;
  background-color: #0085CA;
  z-index: 10; /* Higher z-index to ensure visibility */
  pointer-events: none; // Let clicks pass through
}

// Responsive adjustments
@media (max-width: 1400px) {
  .content-with-wide-sidebar {
    margin-left: 36% !important;
    width: 62% !important;
  }
  
  .content-with-narrow-sidebar {
    margin-left: 6% !important;
    width: 92% !important;
  }
}

@media (max-width: 1000px) {
  .content-with-wide-sidebar {
    margin-left: 35% !important;
    width: 63% !important;
    font-size: 0.9em;
  }
  
  .content-with-narrow-sidebar {
    margin-left: 5% !important;
    width: 93% !important;
    font-size: 0.9em;
  }
}

@media (max-height: 700px) {
  .content-with-wide-sidebar,
  .content-with-narrow-sidebar {
    font-size: 0.85em;
    padding-top: 1% !important;
  }
}
